<tool id="ariba_run" name="ARIBA summary" version="@VERSION@">
    <description>
        Summarises the results from one or more runs of ARIBA
    </description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <expand macro="version_command" />

    <command detect_errors="exit_code"><![CDATA[
        ariba summary out "${" ".join(map(str, $ariba_report))}"
    ]]>    </command>
    <inputs>
            <param name="ariba_report" format="tabular,txt" type="data" label="Report (tsv) file from ARIBA run" help="This command requires one or more report tsv file generated by ARIBA run command."/>
    </inputs>

    <outputs>
        <data format="tabular" name="summary_csv" label="${tool.name} on ${on_string} report file" from_work_dir="./out.tsv" />
        <data format="tabular" name="phandango_csv" label="${tool.name} on ${on_string}: Phandango CSV" from_work_dir="./assembled_genes.fa.gz"/>
        <data format="text" name="phandango_tree" label="${tool.name} on ${on_string}: Phandango Tree file" from_work_dir="./assembled_seqs.fa.gz"/>
    </outputs>

    <tests>
        <test>
        </test>
    </tests>

    <help><![CDATA[
            **Usage**: ariba run [options] <prepareref_dir><reads1.fq><reads2.fq><outdir>

            Runs the local assembly pipeline. Input is dir made by prepareref, and paired
            reads
           
    ]]>    </help>

    <expand macro="citations" />
</tool>