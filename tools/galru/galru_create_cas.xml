<tool id="galru_create_cas" name="galru_create_cas" version="@VERSION@">
    <description>Create Cas gene</description>
    <macros>
        <token name="@VERSION@">0.0.1</token>
    </macros>
    <requirements>
        <container type="singularity">/qib/platforms/Informatics/transfer/outgoing/singularity/galru/galru.sif</container>
    </requirements>
    <version_command>galru_create_cas --version</version_command>
    <command detect_errors="exit_code"><![CDATA[
        #set input_fastas = ''
        #for $counter_q, $input_q in enumerate($fasta_cds):
            ln -fs '$input_q' ${input_q.element_identifier} &&
            #set $input_fastas = $input_fastas + ' ' + ${input_q.element_identifier}
        #end for
        galru_create_cas
        --cdhit_seq_identity $cdhit_seq_identity
        $verbose
        cas_genes.fa
        $input_fastas
    ]]>    </command>

    <inputs>
        <param name="fasta_cds" type="data" multiple="true" format="fastq,fastq.gz" label="Files containing nucleotides of CDS"/>
        <param name="cdhit_seq_identity" type="float" min="0" value="0.99" label="Sequence identity for CD-hit"/>
        <param name="debug" type="boolean" truevalue="--debug" falsevalue="" checked="false" label="Turn on debugging" />
        <param name="verbose" type="boolean" truevalue="--verbose" falsevalue="" checked="false" label="Turn on verbose output" />
    </inputs>

    <outputs>
        <data name="output" format="fasta" from_work_dir="cas_genes.fa" label="${tool.name} on ${on_string} Output CAS genes"/>
        <data name="log" format="text" label="${tool.name} on ${on_string} Log">
            <filter>debug is True</filter>
        </data>
    </outputs>

    <help><![CDATA[

    Documentation can be found at `<https://github.com/quadram-institute-bioscience/galru>`_.

    ]]>    </help>
</tool>
